<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Harness</title>
  </head>
  <body>
    <h1>Proto-JSON-DB Test Harness</h1>

    <script type="module">
      import stateWidthDefaultId from './states-defaultId.json' with { type:  'json'};
      import stateWidthAlternateId from './states-stateId.json' with { type:  'json'};

      import ProtoJsonDb from './index.js';

      const {
        create,
        update,
        remove,
        read,
        list,
      } = ProtoJsonDb(
        {
          default: stateWidthDefaultId,
          alternative: stateWidthAlternateId,
        },
        {
          alternative: 'stateId'
        }
      );

      console.table(list('default')());
      console.table(list('alternative')(_ => _.stateId.at(-1) === 'c'));
      console.table(read('default')('toe'));

      const toe = read('default')('toe');
      toe.action = 'ACTION TOE';

      update('default')('toe', toe);
      console.table(list('default')());

      remove('default')('tac');
      console.table(list('default')());

      create('default')({action: 'ACTION TAC', triggers: {}})
      console.table(list('default')());
    </script>
  </body>
</html>
